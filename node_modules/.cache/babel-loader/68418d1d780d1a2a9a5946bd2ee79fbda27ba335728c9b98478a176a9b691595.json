{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      form: {\n        username: '',\n        password: ''\n      },\n      // 表单验证， 需要在el-form-item- 元素中增加prop属性\n      rules: {\n        username: [{\n          required: true,\n          message: '账号不可为空',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码不可为空',\n          trigger: 'blur'\n        }]\n      },\n      //对话框显示和隐藏\n      dialogVisible: false\n    };\n  },\n  // methods: {\n  //     handleClose: function () {\n  //         console.log(\"Handle Close，空函数\");\n  //     },\n  //     onSubmit(formName) {\n  //         //为表单绑定验证功能\n  //         this.$refs [formName].validate((valid) => {\n  //             if (valid) {\n  //                 this.$axios.post('/login', {\n  //                     username: this.form.username,\n  //                     password: this.form.password\n  //                 })\n  //                     .then(response => {\n  //                         if(response.data.code===20000){\n  //                             console.log('response.data:',response.data)\n  //                             // 这里可以添加登录逻辑，例如发送请求到后端\n  //                             localStorage.setItem('isLoggedIn', 'true');\n  //                             //使用vue-router 路由到指定页面，该方式称之为编程式导航\n  //                             this.$router.push({\n  //                                 path:\"/index\"\n  //                             });\n  //                             console.log(response.data);\n  //                             this.$message.success(response.data.msg)\n  //                         }else{\n  //                             console.log(response.data);\n  //                             this.$message.error(this.form.username+response.data.msg)\n  //                         }\n  //                     })\n  //             } else {\n  //                 this.dialogVisible = true;\n  //                 return false;\n  //             }\n  //         });\n  //     },\n\n  // }\n  methods: {\n    async onSubmit(formName) {\n      this.$refs[formName].validate(async valid => {\n        if (valid) {\n          try {\n            const response = await this.$axios.post('http://localhost:8081/api/login', {\n              username: this.form.username,\n              password: this.form.password\n            });\n            if (response.data.code === 20000) {\n              console.log('response.data:', response.data);\n              localStorage.setItem('isLoggedIn', 'true');\n              this.$router.push({\n                path: \"/index\"\n              });\n              console.log(response.data);\n              this.$message.success(response.data.msg);\n            } else {\n              console.log(response.data);\n              this.$message.error(this.form.username + response.data.msg);\n            }\n          } catch (error) {\n            console.error(error);\n            this.$message.error('登录失败');\n          }\n        } else {\n          this.dialogVisible = true;\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","form","username","password","rules","required","message","trigger","dialogVisible","methods","onSubmit","formName","$refs","validate","valid","response","$axios","post","code","console","log","localStorage","setItem","$router","push","path","$message","success","msg","error"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\n    <div>\n        <el-form ref=\"loginForm\" :model=\"form\" :rules=\"rules\" label width=\" 80px\" class=\"login-box\">\n            <h3 class=\"login-title\">欢迎登录</h3>\n            <el-form-item label=\"账号\" prop=\"username\">\n                <el-input type=\"text\" placeholder=\" 请输入账号\" v-model=\"form.username\"/>\n            </el-form-item>\n            <el-form-item label=\"密码\" prop=\"password\">\n                <el-input type=\"password\" placeholder=\" 请输入密码\" v-model=\" form.password\"/>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" v-on:click=\"onSubmit('loginForm')\">登录</el-button>\n                <el-button type=\"primary\" v-on:click=\"$router.push('/register')\">注册</el-button>\n            </el-form-item>\n        </el-form>\n        <el-dialog\n                title=\"温馨提示\"\n                :visible.sync=\"dialogVisible\"\n                width=\"30%\"\n                :before-close=\"handleClose\">\n            <span>请输入账号和密码</span>\n            <span slot=\"footer\" class=\"dialog-footer\">\n<el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\n      </span>\n        </el-dialog>\n    </div>\n</template>\n<script>\n    export default {\n        name: \"Login\",\n        data() {\n            return {\n\n                form: {\n                    username: '',\n                    password: ''\n                },\n// 表单验证， 需要在el-form-item- 元素中增加prop属性\n                rules: {\n                    username: [{required: true, message: '账号不可为空', trigger: 'blur'}],\n                    password: [{required: true, message: '密码不可为空', trigger: 'blur'}]\n                },\n//对话框显示和隐藏\n                dialogVisible: false\n            }\n        },\n        // methods: {\n        //     handleClose: function () {\n        //         console.log(\"Handle Close，空函数\");\n        //     },\n        //     onSubmit(formName) {\n        //         //为表单绑定验证功能\n        //         this.$refs [formName].validate((valid) => {\n        //             if (valid) {\n        //                 this.$axios.post('/login', {\n        //                     username: this.form.username,\n        //                     password: this.form.password\n        //                 })\n        //                     .then(response => {\n        //                         if(response.data.code===20000){\n        //                             console.log('response.data:',response.data)\n        //                             // 这里可以添加登录逻辑，例如发送请求到后端\n        //                             localStorage.setItem('isLoggedIn', 'true');\n        //                             //使用vue-router 路由到指定页面，该方式称之为编程式导航\n        //                             this.$router.push({\n        //                                 path:\"/index\"\n        //                             });\n        //                             console.log(response.data);\n        //                             this.$message.success(response.data.msg)\n        //                         }else{\n        //                             console.log(response.data);\n        //                             this.$message.error(this.form.username+response.data.msg)\n        //                         }\n        //                     })\n        //             } else {\n        //                 this.dialogVisible = true;\n        //                 return false;\n        //             }\n        //         });\n        //     },\n\n        // }\n        methods: {\n    async onSubmit(formName) {\n        this.$refs[formName].validate(async (valid) => {\n            if (valid) {\n                try {\n                    const response = await this.$axios.post('http://localhost:8081/api/login', {\n                        username: this.form.username,\n                        password: this.form.password\n                    });\n                    if (response.data.code === 20000) {\n                        console.log('response.data:', response.data);\n                        localStorage.setItem('isLoggedIn', 'true');\n                        this.$router.push({ path: \"/index\" });\n                        console.log(response.data);\n                        this.$message.success(response.data.msg);\n                    } else {\n                        console.log(response.data);\n                        this.$message.error(this.form.username + response.data.msg);\n                    }\n                } catch (error) {\n                    console.error(error);\n                    this.$message.error('登录失败');\n                }\n            } else {\n                this.dialogVisible = true;\n                return false;\n            }\n        });\n    }\n}\n\n    }\n</script>\n<style scoped>\n  .login-box {\n    border: 1px solid #DCDFE6;\n    width: 350px;\n    margin: 50px auto;\n    padding: 35px 35px 15px 35px;\n    border-radius: 5px;\n    -webkit-border-radius: 5px;\n    -moz-border-radius: 5px;\n    box-shadow: 0 0 25px #909399;\n  }\n\n  .login-title {\n    text-align: center;\n    margin: 0 auto 40px auto;\n    color: #303133;\n  }\n</style>\n"],"mappings":";AA4BA;EACAA,IAAA;EACAC,KAAA;IACA;MAEAC,IAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACA;MACAC,KAAA;QACAF,QAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACA;MACAC,aAAA;IACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACAC,OAAA;IACA,MAAAC,SAAAC,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAE,QAAA,OAAAC,KAAA;QACA,IAAAA,KAAA;UACA;YACA,MAAAC,QAAA,cAAAC,MAAA,CAAAC,IAAA;cACAf,QAAA,OAAAD,IAAA,CAAAC,QAAA;cACAC,QAAA,OAAAF,IAAA,CAAAE;YACA;YACA,IAAAY,QAAA,CAAAf,IAAA,CAAAkB,IAAA;cACAC,OAAA,CAAAC,GAAA,mBAAAL,QAAA,CAAAf,IAAA;cACAqB,YAAA,CAAAC,OAAA;cACA,KAAAC,OAAA,CAAAC,IAAA;gBAAAC,IAAA;cAAA;cACAN,OAAA,CAAAC,GAAA,CAAAL,QAAA,CAAAf,IAAA;cACA,KAAA0B,QAAA,CAAAC,OAAA,CAAAZ,QAAA,CAAAf,IAAA,CAAA4B,GAAA;YACA;cACAT,OAAA,CAAAC,GAAA,CAAAL,QAAA,CAAAf,IAAA;cACA,KAAA0B,QAAA,CAAAG,KAAA,MAAA5B,IAAA,CAAAC,QAAA,GAAAa,QAAA,CAAAf,IAAA,CAAA4B,GAAA;YACA;UACA,SAAAC,KAAA;YACAV,OAAA,CAAAU,KAAA,CAAAA,KAAA;YACA,KAAAH,QAAA,CAAAG,KAAA;UACA;QACA;UACA,KAAArB,aAAA;UACA;QACA;MACA;IACA;EACA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}